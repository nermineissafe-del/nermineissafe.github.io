<script>
const btn = document.getElementById('playMusicBtn');
const player = document.getElementById('ytPlayer');
btn.onclick = () => {
  if (!player.src.includes("autoplay")) {
    player.style.display = "block";
    player.src += "&autoplay=1";
    btn.innerText = "MUSIC PLAYING";
    btn.disabled = true;
  }
};

const surprise = document.getElementById('surprise');
surprise.onclick = () => surprise.classList.toggle('open');

/* ================== CLOCK ================== */
// Reversed clock: counts backwards
let reversedTime = new Date();
function updateClock() {
  reversedTime.setSeconds(reversedTime.getSeconds() + 1); // "backward" by increasing time visually
  document.getElementById("darkClock").innerText =
    reversedTime.toLocaleTimeString();
}
setInterval(updateClock, 1000);
updateClock();

/* ================== LOVE TIMER ================== */
let loveSeconds = 0;
let loveRunning = false;
setInterval(() => {
  if (loveRunning) {
    loveSeconds++;
    const h = String(Math.floor(loveSeconds/3600)).padStart(2,'0');
    const m = String(Math.floor((loveSeconds%3600)/60)).padStart(2,'0');
    const s = String(loveSeconds%60).padStart(2,'0');
    document.getElementById("loveTime").innerText = `${h}:${m}:${s}`;
  }
}, 1000);

function toggleLoveTime() {
  loveRunning = !loveRunning;
}

/* ================== WIZARD ORACLE ================== */
const askBtn = document.getElementById('askBtn');
const oracleAnswer = document.getElementById('oracleAnswer');
const answers = [
  "yes…", "no…", "maybe…", "ask again later…", "definitely…", "not sure…"
];
askBtn.onclick = () => {
  const rand = answers[Math.floor(Math.random()*answers.length)];
  oracleAnswer.innerText = rand;
};

/* ================== BEAR FEELINGS ================== */
const bearInput = document.getElementById('bearInput');
const saveBear = document.getElementById('saveBear');
const feelingsBody = document.getElementById('feelingsBody');

saveBear.onclick = () => {
  const text = bearInput.value.trim();
  if(text === "") return;

  const now = new Date();
  const hours = String(now.getHours()).padStart(2,'0');
  const mins = String(now.getMinutes()).padStart(2,'0');
  const secs = String(now.getSeconds()).padStart(2,'0');

  const tr = document.createElement('tr');
  tr.innerHTML = `<td>2004</td><td>${hours}:${mins}:${secs}</td><td>${text}</td>`;
  feelingsBody.appendChild(tr);

  bearInput.value = "";
  bearInput.focus();
};
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getFirestore, doc, setDoc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "YOUR_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  projectId: "YOUR_PROJECT",
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const boxes = {
  diaryBox: doc(db, "pages", "diary"),
  loveBox: doc(db, "pages", "love"),
  survivalBox: doc(db, "pages", "survival")
};

Object.keys(boxes).forEach(id => {
  const el = document.getElementById(id);
  onSnapshot(boxes[id], snap => {
    if (snap.exists() && el.innerText !== snap.data().text) {
      el.innerText = snap.data().text;
    }
  });
  el.addEventListener("input", () => {
    setDoc(boxes[id], { text: el.innerText });
  });
});
</script>

</body>
</html>













